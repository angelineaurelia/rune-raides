{"version":3,"sources":["assets/scripts/ai/navigation/Waypoint.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;;;;;;;;;;;;;;;;;;;;;AAE7F,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAY;IAAlD;QAAA,qEAyCC;QAtCY,uBAAiB,GAAe,EAAE,CAAC;QACnC,eAAS,GAAa,EAAE,CAAC;;QAoClC,iBAAiB;IACrB,CAAC;iBAzCoB,QAAQ;IAKzB;;;;OAIG;IACI,6BAAU,GAAjB,UAAkB,aAAuB;QACrC,OAAO,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IACnD,CAAC;IAEM,iCAAc,GAArB,UAAsB,SAAkB;QACpC,+CAA+C;QAC/C,kDAAkD;QAClD,mCAAmC;QACnC,OAAO,SAAS,CAAC,qBAAqB,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;aAC/C,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAClD,GAAG,EAAE,CAAC;IACf,CAAC;IAEM,4BAAS,GAAhB,UAAiB,aAAuB;QACpC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC3C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC;IACxD,CAAC;IAED,wBAAwB;IAExB,yBAAM,GAAN;QACI,KAAqB,UAAsB,EAAtB,KAAA,IAAI,CAAC,iBAAiB,EAAtB,cAAsB,EAAtB,IAAsB,EAAE;YAAxC,IAAI,QAAQ,SAAA;YACb,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;SAClD;IACL,CAAC;IAED,wBAAK,GAAL;IAEA,CAAC;;IAnCD;QADC,QAAQ,CAAC,UAAQ,CAAC;uDACyB;IAH3B,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAyC5B;IAAD,eAAC;CAzCD,AAyCC,CAzCqC,EAAE,CAAC,SAAS,GAyCjD;kBAzCoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Waypoint extends cc.Component {\n\n    @property(Waypoint)\n    readonly adjacentWaypoints: Waypoint[] = [];\n    readonly distances: number[] = [];\n    /**\n     * Returns the distance to a given waypoint.\n     * @param otherWaypoint The waypoint to compute the distance to.\n     * @returns The distance to that waypoint.\n     */\n    public distanceTo(otherWaypoint: Waypoint): number{\n        return this.distanceToNode(otherWaypoint.node);\n    }\n\n    public distanceToNode(otherNode: cc.Node): number{\n        // Computes the magnitude of the vector (a - b)\n        // Where \"a\" is the other waypoint's position, and\n        // \"b\" is this waypoint's position.\n        return otherNode.convertToWorldSpaceAR(cc.Vec2.ZERO)\n            .sub(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO))\n            .mag();\n    }\n\n    public addEdgeTo(otherWaypoint: Waypoint): void{\n        this.adjacentWaypoints.push(otherWaypoint);\n        this.distances.push(this.distanceTo(otherWaypoint));\n    }\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        for (let neighbor of this.adjacentWaypoints) {\n            this.distances.push(this.distanceTo(neighbor));\n        }\n    }\n\n    start () {\n\n    }\n\n    // update (dt) {}\n}\n"]}