{"version":3,"sources":["assets/scripts/Menu/MenuMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    public VolumnValue: number = 0.5;\n\n    onLoad(){\n        let OptionButton = new cc.Component.EventHandler();\n        OptionButton.target = this.node;\n        OptionButton.component = \"MenuMgr\";\n        OptionButton.handler = \"ShowSetting\";\n        cc.find(\"Canvas/background/OptionButton\").getComponent(cc.Button).clickEvents.push(OptionButton);\n\n        //Load VolumnValue from localStorage\n        \n    }\n\n    ShowSetting() {\n        //Setting is a prefab\n        cc.resources.load(\"prefabs/Setting\", cc.Prefab, (err, prefab) => {\n            if (err) {\n                cc.error(\"Failed to load Setting prefab: \", err);\n                return;\n            }\n            const settingNode = cc.instantiate(prefab);\n            settingNode.setPosition(0, 0);\n            settingNode.scaleX = 2   ;\n            settingNode.scaleY = 2; \n            cc.find(\"Canvas\").addChild(settingNode);\n            settingNode.name = \"Setting\";\n    \n            this.initSettingButton();\n        })\n        \n    }\n    initSettingButton(){\n        //ExitSettingButton is a biutton in Setting prefab\n        let ExitSettingButton = new cc.Component.EventHandler();\n        ExitSettingButton.target = this.node;\n        ExitSettingButton.component = \"MenuMgr\";\n        ExitSettingButton.handler = \"ExitSetting\";\n        cc.find(\"Canvas/Setting/ExitSetting\").getComponent(cc.Button).clickEvents.push(ExitSettingButton);\n        //Sign up\n        let SignUpButton = new cc.Component.EventHandler();\n        SignUpButton.target = this.node;\n        SignUpButton.component = \"MenuMgr\";\n        SignUpButton.handler = \"SignUp\";\n        cc.find(\"Canvas/Setting/SignUp\").getComponent(cc.Button).clickEvents.push(SignUpButton);\n        //Login\n        let LoginButton = new cc.Component.EventHandler();\n        LoginButton.target = this.node;\n        LoginButton.component = \"MenuMgr\";\n        LoginButton.handler = \"Login\";\n        cc.find(\"Canvas/Setting/Login\").getComponent(cc.Button).clickEvents.push(LoginButton);\n        //Volumnslider?\n        let Volumnslider = cc.find(\"Canvas/Setting/Volumn/VolumnSlider\").getComponent(cc.Slider);\n        let savedVolumn = cc.sys.localStorage.getItem(\"VolumnValue\");\n        if (savedVolumn !== null) Volumnslider.progress = Number(savedVolumn);\n        else Volumnslider.progress = 0.5;\n        Volumnslider.node.on('slide', this.onVolumnChange, this);\n    }\n    ExitSetting() {\n        let settingNode = cc.find(\"Canvas/Setting\");\n        if(settingNode) {\n            settingNode.destroy();\n        }\n    }\n    onVolumnChange(slider: cc.Slider){\n\n        cc.audioEngine.setMusicVolume(slider.progress); // 0~1\n        cc.audioEngine.setEffectsVolume(slider.progress);\n        this.VolumnValue = slider.progress;\n        cc.sys.localStorage.setItem(\"VolumnValue\", this.VolumnValue.toString());\n    }\n\n    SignUp(){\n        cc.resources.load(\"prefabs/SignupLogin\", cc.Prefab, (err, prefab ) => {\n            if (err) {\n                cc.error (\"Failed to load SignupLogin \", err);\n                return;\n            }\n            const SignupLoginNode = cc.instantiate(prefab);\n            SignupLoginNode.setPosition(0, 0);\n            SignupLoginNode.scaleX = 0.5;\n            SignupLoginNode.scaleY = 0.5;\n            SignupLoginNode.zIndex = 1000;\n            cc.find(\"Canvas/Setting\").addChild(SignupLoginNode);\n            SignupLoginNode.name = \"SignupLogin\";\n           this.initSignupLogin();\n        })\n    }\n    Login() {\n        //SignupLogin is a prefab\n        cc.resources.load(\"prefabs/SignupLogin\", cc.Prefab, (err, prefab ) => {\n            if (err) {\n                cc.error (\"Failed to load SignupLOgin \", err);\n                return;\n            }\n            const SignupLoginNode = cc.instantiate(prefab);\n            SignupLoginNode.setPosition(0, 0);\n            SignupLoginNode.scaleX = 0.5;\n            SignupLoginNode.scaleY = 0.5;\n            SignupLoginNode.zIndex = 1000;\n            cc.find(\"Canvas/Setting\").addChild(SignupLoginNode);\n            SignupLoginNode.name = \"SignupLogin\";\n            this.initSignupLogin();\n        })\n    }\n    initSignupLogin() {\n        let ExitSignupLoginButton = new cc.Component.EventHandler();\n        ExitSignupLoginButton.target = this.node;\n        ExitSignupLoginButton.component = \"MenuMgr\";\n        ExitSignupLoginButton.handler = \"ExitSignupLogin\";\n        cc.find(\"Canvas/Setting/SignupLogin/Exit\").getComponent(cc.Button).clickEvents.push(ExitSignupLoginButton);\n        \n        //save\n        let SaveSignupLoginButton = new cc.Component.EventHandler();\n        SaveSignupLoginButton.target = this.node;\n        SaveSignupLoginButton.component = \"MenuMgr\";\n        SaveSignupLoginButton.handler = \"ExitSignupLogin\";\n        cc.find(\"Canvas/Setting/SignupLogin/Save\").getComponent(cc.Button).clickEvents.push(SaveSignupLoginButton);\n     \n    }\n    ExitSignupLogin() {\n        let T_Node = cc.find(\"Canvas/Setting/SignupLogin\");\n        if(T_Node) {\n            T_Node.destroy();\n        }\n    }\n    \n}\n"]}