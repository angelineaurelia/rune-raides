{"version":3,"sources":["assets/scripts/obj/chest.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAmC,yBAAY;IAA/C;QAAA,qEAsCC;QApCG,kBAAY,GAAc,IAAI,CAAC;QAG/B,eAAS,GAAiB,IAAI,CAAC;QAEvB,gBAAU,GAAiB,IAAI,CAAC;QAEhC,eAAS,GAAY,KAAK,CAAC;;IA6BvC,CAAC;IA3BG,sBAAM,GAAN;IACA,CAAC;IACD,gCAAgB,GAAhB,UAAiB,KAAK,EAAE,IAAI;QACxB,IAAI,IAAI,CAAC,SAAS;YAAE,OAAO;QAC3B,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAC;YAC7B,mBAAmB;YACnB,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACzB;IACL,CAAC;IACD,yBAAS,GAAT;QACI,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAC3C,IAAI,IAAI;YAAE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAElC,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;SACpD;aAAM;YACH,EAAE,CAAC,KAAK,CAAC,kCAAkC,CAAC,CAAC;SAChD;QAED,aAAa;QACb,IAAI,CAAC,YAAY,CAAC,cAAK,CAAC,EAAC,GAAG,CAAC,CAAC;QAC9B,IAAM,MAAM,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACjD,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;QAC1B,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAE3C,CAAC;IAnCD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;+CACW;IAG/B;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;4CACQ;IALd,KAAK;QADzB,OAAO;OACa,KAAK,CAsCzB;IAAD,YAAC;CAtCD,AAsCC,CAtCkC,EAAE,CAAC,SAAS,GAsC9C;kBAtCoB,KAAK","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Chest extends cc.Component {\n    @property(cc.Prefab)\n    potionPrefab: cc.Prefab = null;\n\n    @property(cc.AudioClip)\n    openSound: cc.AudioClip = null;\n\n    private _animation: cc.Animation = null;\n\n    private _isOpened: boolean = false;\n\n    onLoad() {\n    }\n    onCollisionEnter(other, self){\n        if (this._isOpened) return;\n        if (other.node.name === \"Player\"){\n            //播放開啟寶箱動畫animation\n            this.openChest();\n            this._isOpened = true;\n        }\n    }\n    openChest() {\n        let anim = this.getComponent(cc.Animation);\n        if (anim) anim.play(\"chest_open\");\n        \n        if (this.openSound) {\n            cc.audioEngine.playEffect(this.openSound, false);\n        } else {\n            cc.error(\"Chest.openSound is not assigned!\");\n        }\n\n        //藥水放在寶箱的節點之下\n        this.scheduleOnce(()=>{},0.5);\n        const potion = cc.instantiate(this.potionPrefab);\n        potion.parent = this.node;\n        potion.setPosition(this.node.position);\n\n    }\n}\n"]}