{"version":3,"sources":["assets\\scripts\\input\\KeyboardControls.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport Controller from \"./Controller\";\r\nimport { ButtonState, IInputControls } from \"./IInputControls\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class KeyboardControls\r\n    extends cc.Component\r\n    implements IInputControls {\r\n\r\n    private _hAxis: number = 0;\r\n    public get horizontalAxis(): number { return this._hAxis }\r\n\r\n    private _vAxis: number = 0;\r\n    public get verticalAxis(): number { return this._vAxis }\r\n\r\n    private _zKey: ButtonState = ButtonState.Rest;\r\n    public get attack(): ButtonState { return this._zKey }\r\n    public get interact(): ButtonState { return this._zKey }\r\n\r\n    private _xKey: ButtonState = ButtonState.Rest;\r\n    public get gethurt(): ButtonState { return this._xKey }\r\n\r\n    private _cKey: ButtonState = ButtonState.Rest;\r\n    public get attack2(): ButtonState { return this._cKey }\r\n\r\n    private _vKey: ButtonState = ButtonState.Rest;\r\n    public get attack3(): ButtonState { return this._vKey }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() { }\r\n\r\n    start() {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n    onKeyDown(event: cc.Event.EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this._hAxis = -1;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this._hAxis = 1;\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this._vAxis = 1;\r\n                break;\r\n            case cc.macro.KEY.s:\r\n                this._vAxis = -1;\r\n                break;\r\n            case cc.macro.KEY.z: \r\n                if (this._zKey === ButtonState.Rest || this._zKey === ButtonState.Released) {\r\n                    this._zKey = ButtonState.Pressed;\r\n                } else {\r\n                    this._zKey = ButtonState.Held;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.x: \r\n                if (this._xKey === ButtonState.Rest || this._xKey === ButtonState.Released) {\r\n                    this._xKey = ButtonState.Pressed;\r\n                    \r\n                } else {\r\n                    this._xKey = ButtonState.Held;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.c: \r\n                if (this._cKey === ButtonState.Rest || this._cKey === ButtonState.Released) {\r\n                    this._cKey = ButtonState.Pressed;\r\n                } else {\r\n                    this._cKey = ButtonState.Held;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.v: \r\n                if (this._vKey === ButtonState.Rest || this._vKey === ButtonState.Released) {\r\n                    this._vKey = ButtonState.Pressed;\r\n                } else {\r\n                    this._vKey = ButtonState.Held;\r\n                }\r\n                break;\r\n        }\r\n        this._vAxis = clamp(this._vAxis);\r\n        this._hAxis = clamp(this._hAxis);\r\n    }\r\n\r\n    onKeyUp(event: cc.Event.EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this._hAxis += 1;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this._hAxis -= 1;\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this._vAxis -= 1;\r\n                break;\r\n            case cc.macro.KEY.s:\r\n                this._vAxis += 1;\r\n                break;\r\n            case cc.macro.KEY.z: \r\n                if (this._zKey === ButtonState.Pressed || this._zKey === ButtonState.Held) {\r\n                    this._zKey = ButtonState.Released;\r\n                } else {\r\n                    this._zKey = ButtonState.Rest;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.x: \r\n                if (this._xKey === ButtonState.Pressed || this._xKey === ButtonState.Held) {\r\n                    this._xKey = ButtonState.Released;\r\n                } else {\r\n                    this._xKey = ButtonState.Rest;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.c: \r\n                if (this._cKey === ButtonState.Pressed || this._cKey === ButtonState.Held) {\r\n                    this._cKey = ButtonState.Released;\r\n                } else {\r\n                    this._cKey = ButtonState.Rest;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.v: \r\n                if (this._vKey === ButtonState.Pressed || this._vKey === ButtonState.Held) {\r\n                    this._vKey = ButtonState.Released;\r\n                } else {\r\n                    this._vKey = ButtonState.Rest;\r\n                }\r\n                break;\r\n        }\r\n        this._vAxis = clamp(this._vAxis);\r\n        this._hAxis = clamp(this._hAxis);\r\n    }\r\n\r\n}\r\n\r\nfunction clamp(value: number, a: number = -1, b: number = 1) {\r\n    if (value < a) return a;\r\n    if (value > b) return b;\r\n    return value;\r\n}"]}