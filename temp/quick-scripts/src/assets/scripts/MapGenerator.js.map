{"version":3,"sources":["assets/scripts/MapGenerator.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\nimport {Map_node, Map_edge, Map_selected_edge, mapRoomUnit, Map_Graph} from './MapGeneratorCore';\n\n@ccclass\nexport default class MapGenerator extends cc.Component {\n\n    /*@property(cc.Label)\n    label: cc.Label = null;\n\n    @property\n    text: string = 'hello';*/\n\n    @property(cc.Node)\n    wallList: cc.Node = null;\n\n    //Please set the Anchor of Prefab into (0,0) first\n    @property(cc.Prefab)\n    verticalWallPrefab: cc.Prefab = null;\n\n    //Please set the Anchor of Prefab into (0,0) first\n    @property(cc.Prefab)\n    horizontalWallPrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    chestWallPrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    keyToNextLevel: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    lockToNextLevel: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    groundPrefab: cc.Prefab = null;\n\n    private myMap : Map_Graph = null;\n    private Map_xmax : number = 10;\n    private Map_ymax : number = 5;\n    private chestboxes : number = 2;\n    private blocksize_x : number = 100;\n    private blocksize_y : number = 100;\n    public get MapXmax(): number {\n        return this.Map_xmax* this.blocksize_x;\n    }\n    public get MapYmax(): number {\n        return this.Map_ymax * this.blocksize_y;\n    }\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        ;\n    }\n\n    GeneratorMap () {\n        this.myMap = new Map_Graph(this.Map_xmax,this.Map_ymax);// generate map\n        //Please set the Anchor of Prefab into (0,0) first\n        for(let _x:number = 0;_x<this.Map_xmax;_x++){\n            for(let _y:number = 0;_y<this.Map_ymax;_y++){\n                const prefab_temp = cc.instantiate(this.groundPrefab);\n                prefab_temp.setPosition(_x*this.blocksize_x,_y*this.blocksize_y);\n                this.wallList.addChild(prefab_temp,0,'ground');\n            }\n        }\n        for(let _x:number = 0;_x<this.Map_xmax;_x++){\n            for(let _y:number = 0;_y<this.Map_ymax;_y++){\n                if(this.myMap.mapBlock[_y][_x].up){\n                    const prefab_temp = cc.instantiate(this.horizontalWallPrefab);\n                    prefab_temp.setPosition(_x*this.blocksize_x,_y*this.blocksize_y);\n                    this.wallList.addChild(prefab_temp,1,'wall');\n                }\n                if(this.myMap.mapBlock[_y][_x].left){\n                    const prefab_temp = cc.instantiate(this.verticalWallPrefab);\n                    prefab_temp.setPosition(_x*this.blocksize_x,_y*this.blocksize_y);\n                    this.wallList.addChild(prefab_temp,1,'wall');\n                }\n            }\n        }\n        // Generate the outer walls\n        for(let i:number = 0;i<this.Map_xmax;i++){\n            const prefab_temp = cc.instantiate(this.horizontalWallPrefab);\n            prefab_temp.setPosition(i*this.blocksize_x,this.Map_ymax*this.blocksize_y);\n            this.wallList.addChild(prefab_temp,1,'wall');\n        }\n\n        // Generate the vertical walls\n        for(let i:number = 0;i<this.Map_ymax;i++){\n            const prefab_temp = cc.instantiate(this.verticalWallPrefab);\n            prefab_temp.setPosition(this.Map_xmax*this.blocksize_x,i*this.blocksize_y);\n            this.wallList.addChild(prefab_temp,1,'wall');\n        }\n        this.generateKey_Lock();\n    }\n\n    regenerateMap(level: number) {\n        this.wallList.removeAllChildren();\n        // Find Level\n        this.Map_xmax = level*4 + 6 ; // Level 1,2,3...，Map_xmax  = 10,14,18...\n        this.Map_ymax = level*2 + 3 ; // Level 1,2,3...，Map_ymax = 5,7,9...\n        this.chestboxes = level*2 + 1 ;\n\n        this.myMap = new Map_Graph(this.Map_xmax, this.Map_ymax);\n        \n        for(let _x:number = 0;_x<this.Map_xmax;_x++){\n            for(let _y:number = 0;_y<this.Map_ymax;_y++){\n                const prefab_temp = cc.instantiate(this.groundPrefab);\n                prefab_temp.setPosition(_x*this.blocksize_x,_y*this.blocksize_y);\n                this.wallList.addChild(prefab_temp,0,'ground');\n            }\n        }\n\n        for(let _x:number = 0;_x<this.Map_xmax;_x++){\n            for(let _y:number = 0;_y<this.Map_ymax;_y++){\n                if(this.myMap.mapBlock[_y][_x].up){\n                    const prefab_temp = cc.instantiate(this.horizontalWallPrefab);\n                    prefab_temp.setPosition(_x*this.blocksize_x,_y*this.blocksize_y);\n                    this.wallList.addChild(prefab_temp,1,'wall');\n                }\n                if(this.myMap.mapBlock[_y][_x].left){\n                    const prefab_temp = cc.instantiate(this.verticalWallPrefab);\n                    prefab_temp.setPosition(_x*this.blocksize_x,_y*this.blocksize_y);\n                    this.wallList.addChild(prefab_temp,1,'wall');\n                }\n            }\n        }\n        for(let i:number = 0;i<this.Map_xmax;i++){\n            const prefab_temp = cc.instantiate(this.horizontalWallPrefab);\n            prefab_temp.setPosition(i*this.blocksize_x,this.Map_ymax*this.blocksize_y);\n            this.wallList.addChild(prefab_temp,1,'wall');\n        }\n        for(let i:number = 0;i<this.Map_ymax;i++){\n            const prefab_temp = cc.instantiate(this.verticalWallPrefab);\n            prefab_temp.setPosition(this.Map_xmax*this.blocksize_x,i*this.blocksize_y);\n            this.wallList.addChild(prefab_temp,1,'wall');\n        }\n        this.generateKey_Lock();\n    }\n    \n    generateKey_Lock(){\n        let _x0:number = 0;_x0 = Math.floor(Math.random() * this.Map_xmax) + 0.5;\n        let _y0:number = 0;_y0 = Math.floor(Math.random() * this.Map_ymax) + 0.5;\n        let _x1:number = 0;_x1 = Math.floor(Math.random() * this.Map_xmax) + 0.5;\n        let _y1:number = 0;_y1 = Math.floor(Math.random() * this.Map_ymax) + 0.5;\n\n        while((_x0 === _x1) && (_y0 === _y1)){\n            _x1 = Math.floor(Math.random() * this.Map_xmax) + 0.5;\n            _y1 = Math.floor(Math.random() * this.Map_ymax) + 0.5;\n        }\n\n        let mapBlocks : boolean[][] = []; // mapBlocks[_y][_x] mapBlocks[_i][_j]\n        for(let _i:number = 0;_i<this.MapYmax;_i += 1){\n            mapBlocks[_i] = [];\n            for(let _j:number = 0;_j<this.MapXmax;_j += 1){\n                mapBlocks[_i][_j] = false;\n            }\n        }\n        mapBlocks[Math.floor(_y0)][Math.floor(_x0)] = true;\n        mapBlocks[Math.floor(_y1)][Math.floor(_x1)] = true;\n\n        for(let i:number=0;i<this.chestboxes;i+=1){\n            let _x:number = 0;_x = Math.floor(Math.random() * this.Map_xmax) + 0.5;\n            let _y:number = 0;_y = Math.floor(Math.random() * this.Map_ymax) + 0.5;\n            while(mapBlocks[Math.floor(_y)][Math.floor(_x)]){\n                _x = Math.floor(Math.random() * this.Map_xmax) + 0.5;\n                _y = Math.floor(Math.random() * this.Map_ymax) + 0.5;\n            }\n            mapBlocks[Math.floor(_y)][Math.floor(_x)] = true;\n            //=====================================================================\n            const prefab_temp_2 = cc.instantiate(this.chestWallPrefab);\n            prefab_temp_2.setPosition(_x*this.blocksize_x,_y*this.blocksize_y);\n            this.wallList.addChild(prefab_temp_2,1,'chest');\n            console.log(\"chest at:\",_x, _y);\n        }\n        \n        const prefab_temp_0 = cc.instantiate(this.keyToNextLevel);\n        prefab_temp_0.setPosition(_x0*this.blocksize_x,_y0*this.blocksize_y);\n        this.wallList.addChild(prefab_temp_0,1,'key');\n        console.log(\"Key at:\",_x0, _y0);\n\n        const prefab_temp_1 = cc.instantiate(this.lockToNextLevel);\n        prefab_temp_1.setPosition(_x1*this.blocksize_x,_y1*this.blocksize_y);\n        this.wallList.addChild(prefab_temp_1,1,'lock');\n        console.log(\"Lock at:\",_x1, _y1);\n    }\n    // update (dt) {}\n}"]}